import{r as f,u as _,j as e,H as w,a as A}from"./app-DVn_ts6l.js";import{A as I}from"./app-layout-DXD5WsAS.js";import{B as d}from"./button-C_k8EYzJ.js";import{L as c,I as p}from"./label-psgDkQxQ.js";import{T as U}from"./textarea-CAPcrS4w.js";import{C as $}from"./checkbox-R0_0IWTG.js";import{Q as E}from"./QuillEditorAdvanced-BozjNYi3.js";/* empty css            */import"./index-BBH0EURQ.js";import"./index-oFvLLOob.js";import"./index-CErmdtXo.js";import"./quill.snow-DUdMwU9v.js";const F=[{title:"Articles",href:"/admin/articles"},{title:"Edit",href:"#"}];function q({article:s}){const[u,n]=f.useState(null),[h,m]=f.useState(!1),{data:l,setData:o,post:j,processing:g,errors:a}=_({_method:"put",title:s.title,description:s.description,featured_image:null,custom_date:s.custom_date||"",content:s.content,is_active:s.is_active,extra_images:[]}),v=t=>{t.preventDefault(),j(route("admin.articles.update",s.id))},N=t=>{const i=Array.from(t.target.files||[]);o("extra_images",i)},b=t=>{confirm("Are you sure you want to delete this image?")&&A.delete(route("admin.article-images.destroy",t))},y=async(t,i)=>{try{const r=`${window.location.origin}/storage/${t}`;await navigator.clipboard.writeText(r),n(i),setTimeout(()=>n(null),2e3)}catch(r){console.error("Failed to copy image URL:",r);const x=document.createElement("textarea");x.value=`${window.location.origin}/storage/${t}`,document.body.appendChild(x),x.select(),document.execCommand("copy"),document.body.removeChild(x),n(i),setTimeout(()=>n(null),2e3)}},C=async t=>{try{const i=`${window.location.origin}/storage/${t}`;await navigator.clipboard.writeText(i),m(!0),setTimeout(()=>m(!1),2e3)}catch(i){console.error("Failed to copy featured image URL:",i);const r=document.createElement("textarea");r.value=`${window.location.origin}/storage/${t}`,document.body.appendChild(r),r.select(),document.execCommand("copy"),document.body.removeChild(r),m(!0),setTimeout(()=>m(!1),2e3)}};return e.jsxs(I,{breadcrumbs:F,children:[e.jsx(w,{title:`Edit Article: ${s.title}`}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsxs("div",{className:"relative w-full max-w-4xl mx-auto overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-background p-8 space-y-8",children:[e.jsxs("form",{onSubmit:v,className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{children:"Title"}),e.jsx(p,{value:l.title,onChange:t=>o("title",t.target.value)}),a.title&&e.jsx("p",{className:"text-sm text-red-500",children:a.title})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{children:"Description"}),e.jsx(U,{rows:3,value:l.description,onChange:t=>o("description",t.target.value)}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{children:"Featured Image"}),e.jsx(p,{type:"file",accept:"image/*",onChange:t=>o("featured_image",t.target.files?.[0]||null)}),s.featured_image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Current image:"}),e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:`/storage/${s.featured_image}`,alt:"Current featured",className:"w-32 h-32 object-cover rounded"}),e.jsx(d,{type:"button",variant:"secondary",size:"sm",className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>C(s.featured_image),children:h?e.jsx("span",{className:"text-xs",children:"âœ“"}):e.jsx("span",{className:"text-xs",children:"ðŸ“‹"})})]}),h&&e.jsx("p",{className:"text-xs text-green-600 mt-1",children:"Featured image URL copied to clipboard!"})]}),a.featured_image&&e.jsx("p",{className:"text-sm text-red-500",children:a.featured_image})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{children:"Custom Date"}),e.jsx(p,{type:"date",value:l.custom_date,onChange:t=>o("custom_date",t.target.value)}),a.custom_date&&e.jsx("p",{className:"text-sm text-red-500",children:a.custom_date})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{children:"Content"}),e.jsx(E,{value:l.content,onChange:t=>o("content",t),placeholder:"Write your article content here...",height:"500px"}),a.content&&e.jsx("p",{className:"text-sm text-red-500",children:a.content})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(c,{children:"Add More Images"}),e.jsx(p,{type:"file",accept:"image/*",multiple:!0,onChange:N}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select additional images to add to this article"}),l.extra_images.length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l.extra_images.length," new image(s) selected"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx($,{id:"is_active",checked:l.is_active,onCheckedChange:t=>o("is_active",!!t)}),e.jsx(c,{htmlFor:"is_active",children:"Active Article"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(d,{type:"submit",disabled:g,children:g?"Updatingâ€¦":"Update Article"}),e.jsx(d,{variant:"outline",asChild:!0,children:e.jsx("a",{href:route("admin.articles.index"),children:"Cancel"})})]})]}),s.images.length>0&&e.jsxs("div",{className:"border-t pt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.images.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:`/storage/${t.image_path}`,alt:t.alt_text||"Article image",className:"w-full h-32 object-cover rounded"}),e.jsxs("div",{className:"absolute top-2 right-2 flex flex-col gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx(d,{type:"button",variant:"secondary",size:"sm",className:"w-8 h-8 p-0",onClick:()=>y(t.image_path,t.id),title:"Copy image URL",children:u===t.id?e.jsx("span",{className:"text-xs",children:"âœ“"}):e.jsx("span",{className:"text-xs",children:"ðŸ“‹"})}),e.jsx(d,{type:"button",variant:"destructive",size:"sm",className:"w-8 h-8 p-0",onClick:()=>b(t.id),title:"Delete image",children:e.jsx("span",{className:"text-xs",children:"Ã—"})})]}),u===t.id&&e.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:e.jsx("p",{className:"text-xs text-green-600 bg-white/90 rounded px-2 py-1 text-center",children:"URL copied!"})})]},t.id))})]})]})})]})}export{q as default};
