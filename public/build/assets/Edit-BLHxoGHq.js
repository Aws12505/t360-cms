import{u as h,j as e,H as g,r as f}from"./app-FtSO0pVY.js";import{A as j}from"./app-layout-DJFElo1W.js";import{B as c}from"./button-g2iApVhU.js";import{L as l,I as d}from"./label-CS9X4Jkg.js";import{T as v}from"./textarea-jfFIP5NU.js";import{C as N}from"./checkbox-BUFK26U6.js";import{Q as _}from"./QuillEditorAdvanced-OdRR9vX9.js";/* empty css            */import"./index-1BMVSORN.js";import"./index-CnLSit_9.js";import"./index-BzWBaWCr.js";import"./quill.snow-Cn2Hfe7G.js";const b=[{title:"Articles",href:"/admin/articles"},{title:"Edit",href:"#"}];function B({article:s}){const{data:i,setData:r,post:n,processing:o,errors:a}=h({_method:"put",title:s.title,description:s.description,featured_image:null,custom_date:s.custom_date||"",content:s.content,is_active:s.is_active,extra_images:[]}),m=t=>{t.preventDefault(),n(route("admin.articles.update",s.id))},x=t=>{const p=Array.from(t.target.files||[]);r("extra_images",p)},u=t=>{confirm("Are you sure you want to delete this image?")&&f.delete(route("admin.article-images.destroy",t))};return e.jsxs(j,{breadcrumbs:b,children:[e.jsx(g,{title:`Edit Article: ${s.title}`}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsxs("div",{className:"relative w-full max-w-4xl mx-auto overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-background p-8 space-y-8",children:[e.jsxs("form",{onSubmit:m,className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{children:"Title"}),e.jsx(d,{value:i.title,onChange:t=>r("title",t.target.value)}),a.title&&e.jsx("p",{className:"text-sm text-red-500",children:a.title})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{children:"Description"}),e.jsx(v,{rows:3,value:i.description,onChange:t=>r("description",t.target.value)}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{children:"Featured Image"}),e.jsx(d,{type:"file",accept:"image/*",onChange:t=>r("featured_image",t.target.files?.[0]||null)}),s.featured_image&&e.jsxs("div",{className:"mt-2",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:"Current image:"}),e.jsx("img",{src:`/storage/${s.featured_image}`,alt:"Current featured",className:"w-32 h-32 object-cover rounded"})]}),a.featured_image&&e.jsx("p",{className:"text-sm text-red-500",children:a.featured_image})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{children:"Custom Date"}),e.jsx(d,{type:"date",value:i.custom_date,onChange:t=>r("custom_date",t.target.value)}),a.custom_date&&e.jsx("p",{className:"text-sm text-red-500",children:a.custom_date})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{children:"Content"}),e.jsx(_,{value:i.content,onChange:t=>r("content",t),placeholder:"Write your article content here...",height:"500px"}),a.content&&e.jsx("p",{className:"text-sm text-red-500",children:a.content})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(l,{children:"Add More Images"}),e.jsx(d,{type:"file",accept:"image/*",multiple:!0,onChange:x}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Select additional images to add to this article"}),i.extra_images.length>0&&e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.extra_images.length," new image(s) selected"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{id:"is_active",checked:i.is_active,onCheckedChange:t=>r("is_active",!!t)}),e.jsx(l,{htmlFor:"is_active",children:"Active Article"})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(c,{type:"submit",disabled:o,children:o?"Updating…":"Update Article"}),e.jsx(c,{variant:"outline",asChild:!0,children:e.jsx("a",{href:route("admin.articles.index"),children:"Cancel"})})]})]}),s.images.length>0&&e.jsxs("div",{className:"border-t pt-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Existing Images"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:s.images.map(t=>e.jsxs("div",{className:"relative group",children:[e.jsx("img",{src:`/storage/${t.image_path}`,alt:t.alt_text||"Article image",className:"w-full h-32 object-cover rounded"}),e.jsx(c,{variant:"destructive",size:"sm",className:"absolute top-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",onClick:()=>u(t.id),children:"×"})]},t.id))})]})]})})]})}export{B as default};
