import{a as G,u as b,j as e,H as J,r as K,L as O}from"./app-CpsGpbBH.js";import{A as V}from"./app-layout-CgWAoQpO.js";import{B as l}from"./button-CJsCOHcZ.js";import{L as i,I as y}from"./label-D8MM7l7a.js";import{C as T}from"./checkbox-DZ3gK2al.js";import{Q as L}from"./QuillEditor-oBPEZli8.js";import{F as W}from"./flash-message-D91ol99a.js";/* empty css            */import"./index-Bi77uxjP.js";import"./index-CHxJI28F.js";import"./index-_hbviT3b.js";import"./quill.snow-D5oOdYe2.js";const X=[{title:"Pricing Tables",href:"/admin/pricing-tables"},{title:"Edit",href:"#"}];function oe({table:d,safetyContents:N,regularContents:_}){const[x,p]=G.useState(null),{data:P,setData:k,put:F,processing:C,errors:S}=b({title:d.title}),{data:u,setData:h,post:A,processing:E,errors:c,reset:M}=b({service_name:"",description:"",is_safety:!1}),{data:g,setData:o,put:$,processing:w,errors:m}=b({service_name:"",description:"",is_safety:!1}),H=s=>{s.preventDefault(),F(route("admin.pricing-tables.update",d.id))},I=s=>{s.preventDefault(),A(route("admin.pricing-tables.contents.store",d.id),{onSuccess:()=>M()})},R=s=>{p(s.id),o({service_name:s.service_name,description:s.description,is_safety:s.is_safety})},U=()=>{p(null)},z=s=>{s.preventDefault(),x&&$(route("admin.pricing-table-contents.update",x),{onSuccess:()=>p(null)})},B=s=>{confirm("Are you sure you want to delete this content?")&&K.delete(route("admin.pricing-table-contents.destroy",s))},Q=({paginatedData:s,pageParam:f})=>s.last_page<=1?null:e.jsx("div",{className:"flex justify-center items-center gap-2 mt-4",children:s.links.map((r,n)=>{if(!r.url)return e.jsx("span",{className:"px-3 py-1 text-gray-400 cursor-not-allowed",dangerouslySetInnerHTML:{__html:r.label}},n);const j=new URL(r.url),t=new URL(window.location.href),a=new URLSearchParams(t.search);return j.searchParams.forEach((q,v)=>{(v===f||v==="page")&&a.set(v,q)}),e.jsx(O,{href:`${t.pathname}?${a.toString()}`,className:`px-3 py-1 rounded ${r.active?"bg-primary text-primary-foreground":"bg-gray-100 hover:bg-gray-200 text-gray-700"}`,dangerouslySetInnerHTML:{__html:r.label}},n)})}),D=({contents:s,title:f,emptyMessage:r,paginatedData:n,pageParam:j})=>e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h3",{className:"text-lg font-semibold",children:f}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Total: ",n.total," items"]})]}),s.length===0?e.jsx("p",{className:"text-muted-foreground text-center py-8",children:r}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"space-y-3",children:s.map(t=>e.jsx("div",{className:"border rounded-lg p-4 bg-card",children:x===t.id?e.jsxs("form",{onSubmit:z,className:"space-y-4",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Service Name"}),e.jsx(y,{value:g.service_name,onChange:a=>o("service_name",a.target.value)}),m.service_name&&e.jsx("p",{className:"text-sm text-red-500",children:m.service_name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Description"}),e.jsx(L,{value:g.description,onChange:a=>o("description",a)}),m.description&&e.jsx("p",{className:"text-sm text-red-500",children:m.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:`edit-safety-${t.id}`,checked:g.is_safety,onCheckedChange:a=>o("is_safety",!!a)}),e.jsx(i,{htmlFor:`edit-safety-${t.id}`,children:"Safety Feature"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(l,{type:"submit",disabled:w,children:w?"Saving…":"Save"}),e.jsx(l,{type:"button",variant:"outline",onClick:U,children:"Cancel"})]})]}):e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:t.service_name}),e.jsx("div",{className:"prose prose-sm max-w-none mt-2 text-muted-foreground",dangerouslySetInnerHTML:{__html:t.description}}),t.is_safety&&e.jsx("span",{className:"inline-block mt-2 text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:"Safety ✓"})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsx(l,{variant:"outline",size:"sm",onClick:()=>R(t),children:"Edit"}),e.jsx(l,{variant:"destructive",size:"sm",onClick:()=>B(t.id),children:"Delete"})]})]})},t.id))}),e.jsx(Q,{paginatedData:n,pageParam:j})]})]});return e.jsxs(V,{breadcrumbs:X,children:[e.jsx(J,{title:`Edit Table: ${d.title}`}),e.jsxs("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:[e.jsx(W,{}),e.jsxs("div",{className:"relative w-full max-w-7xl mx-auto overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-background p-8 space-y-8",children:[e.jsxs("form",{onSubmit:H,className:"space-y-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Table Settings"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Table Title"}),e.jsx(y,{value:P.title,onChange:s=>k("title",s.target.value)}),S.title&&e.jsx("p",{className:"text-sm text-red-500",children:S.title})]}),e.jsx(l,{type:"submit",disabled:C,children:C?"Saving…":"Save Title"})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Table Contents"}),e.jsxs("div",{className:"grid lg:grid-cols-2 gap-8",children:[e.jsx("div",{className:"border rounded-lg p-4 bg-green-50/50 dark:bg-green-950/20",children:e.jsx(D,{contents:N.data,title:"Safety Features",emptyMessage:"No safety contents added yet.",paginatedData:N,pageParam:"safety_page"})}),e.jsx("div",{className:"border rounded-lg p-4 bg-blue-50/50 dark:bg-blue-950/20",children:e.jsx(D,{contents:_.data,title:"Regular Features",emptyMessage:"No regular contents added yet.",paginatedData:_,pageParam:"regular_page"})})]})]}),e.jsxs("form",{onSubmit:I,className:"space-y-4 border-t pt-6",children:[e.jsx("h2",{className:"text-xl font-semibold",children:"Add New Content"}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Service Name"}),e.jsx(y,{value:u.service_name,onChange:s=>h("service_name",s.target.value),placeholder:"e.g., Customer Support"}),c.service_name&&e.jsx("p",{className:"text-sm text-red-500",children:c.service_name})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Description"}),e.jsx(L,{value:u.description,onChange:s=>h("description",s)}),c.description&&e.jsx("p",{className:"text-sm text-red-500",children:c.description})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(T,{id:"is_safety",checked:u.is_safety,onCheckedChange:s=>h("is_safety",!!s)}),e.jsx(i,{htmlFor:"is_safety",children:"Safety Feature"})]}),e.jsx(l,{type:"submit",disabled:E,children:E?"Adding…":"Add Content"})]})]})]})]})}export{oe as default};
