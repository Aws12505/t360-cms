import{u as g,j as e,H as _}from"./app-DNV66ZY6.js";import{A as b}from"./app-layout-C6HjfMN0.js";import{B as u}from"./button-BuypCEcR.js";import{L as i,I as d}from"./label-Ce9Ql6OJ.js";import{T as N}from"./textarea-GoHo7AVv.js";import{C as o}from"./checkbox-CQmUahiq.js";import{Q as C}from"./QuillEditor-D0eWzYzs.js";/* empty css            */import"./index-DHKeGcLT.js";import"./index-dU3a4bsa.js";import"./index-DQx-QLRJ.js";import"./quill.snow-CJupi1OH.js";const y=[{title:"Pricing Plans",href:"/admin/pricing-plans"},{title:"Edit",href:"#"}];function D({plan:r,allFeatures:n}){const x=Array.isArray(n)?n:[],p=Array.isArray(r.custom_features)?r.custom_features.map(s=>s.id):[],{data:t,setData:l,put:h,processing:m,errors:a}=g({name:r.name,total_value:r.total_value??"",per_text:r.per_text??"",description:r.description,features:r.features??"",is_customizable:r.is_customizable,is_best_value:r.is_best_value,order:r.order,feature_ids:p}),f=(s,c)=>{l("feature_ids",c?[...t.feature_ids,s]:t.feature_ids.filter(v=>v!==s))},j=s=>{s.preventDefault(),h(route("admin.pricing-plans.update",r.id))};return e.jsxs(b,{breadcrumbs:y,children:[e.jsx(_,{title:`Edit Plan: ${r.name}`}),e.jsx("div",{className:"flex h-full flex-1 flex-col gap-4 rounded-xl p-4 overflow-x-auto",children:e.jsx("div",{className:"relative w-full max-w-4xl mx-auto overflow-hidden rounded-xl border border-sidebar-border/70 dark:border-sidebar-border bg-background p-8",children:e.jsxs("form",{onSubmit:j,className:"space-y-8",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Plan Name"}),e.jsx(d,{value:t.name,onChange:s=>l("name",s.target.value)}),a.name&&e.jsx("p",{className:"text-sm text-red-500",children:a.name})]}),!t.is_customizable&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Total Value"}),e.jsx(d,{type:"number",step:"0.01",value:t.total_value,onChange:s=>l("total_value",s.target.value)}),a.total_value&&e.jsx("p",{className:"text-sm text-red-500",children:a.total_value})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Per Text"}),e.jsx(d,{value:t.per_text,onChange:s=>l("per_text",s.target.value),placeholder:"month / year / etc."}),a.per_text&&e.jsx("p",{className:"text-sm text-red-500",children:a.per_text})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Description"}),e.jsx(C,{value:t.description,onChange:s=>l("description",s)}),a.description&&e.jsx("p",{className:"text-sm text-red-500",children:a.description})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Feature Summary (small text)"}),e.jsx(N,{rows:3,value:t.features,onChange:s=>l("features",s.target.value),placeholder:"Brief feature description..."}),a.features&&e.jsx("p",{className:"text-sm text-red-500",children:a.features})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Order"}),e.jsx(d,{type:"number",value:t.order,onChange:s=>l("order",parseInt(s.target.value)||0),min:"0"}),a.order&&e.jsx("p",{className:"text-sm text-red-500",children:a.order})]}),e.jsxs("div",{className:"flex flex-col gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"is_customizable",checked:t.is_customizable,onCheckedChange:s=>{l("is_customizable",!!s),s&&(l("total_value",""),l("per_text",""))}}),e.jsx(i,{htmlFor:"is_customizable",children:"Customizable Plan"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:"is_best_value",checked:t.is_best_value,onCheckedChange:s=>l("is_best_value",!!s)}),e.jsx(i,{htmlFor:"is_best_value",children:"Best Value Plan"})]})]}),e.jsxs("div",{className:"flex flex-col gap-2",children:[e.jsx(i,{children:"Select Features"}),x.length===0?e.jsx("p",{className:"text-sm text-muted-foreground",children:"No features available."}):e.jsx("div",{className:"grid md:grid-cols-2 gap-2",children:x.map(s=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(o,{id:`feat-${s.id}`,checked:t.feature_ids.includes(s.id),onCheckedChange:c=>f(s.id,!!c)}),e.jsxs(i,{htmlFor:`feat-${s.id}`,className:"cursor-pointer select-none flex-1",children:[s.name,t.is_customizable&&e.jsxs("span",{className:"text-xs text-muted-foreground",children:[" — $",s.price]})]})]},s.id))}),a.feature_ids&&e.jsx("p",{className:"text-sm text-red-500",children:a.feature_ids})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsx(u,{type:"submit",disabled:m,children:m?"Updating…":"Update Plan"}),e.jsx(u,{variant:"outline",asChild:!0,children:e.jsx("a",{href:route("admin.pricing-plans.index"),children:"Cancel"})})]})]})})})]})}export{D as default};
